七月底入职满一年了，又刚好赶上年中，所以写一下我成为社畜之后的第一篇小结。

2021年的下半年几乎没有对工作做记录（其实零零散散记录了一些，但没有认真整理），在年底的时候也没有做总结，所以顺便也写在这篇年中小结里带过。

关于前端框架，我之前只用过vue2。公司项目的技术栈是react+typescript，都是我没接触过的东西，所以赶紧去看官方文档，学了一些可以能写基础功能的皮毛。typescript的官方文档是真的枯燥啊，后来我又发现了一个不错的ts教教程：https://ts.yayujs.com/ 。 ps：公司的前辈写了一篇“给新人的前端教程”，可以说是我的救命稻草了。

接下来就是要开始参与开发了。第一次去大致了解公司项目的代码时，我立刻就懂了为什么大家都说在学校写的代码和公司的代码没有什么关系。我第一次知道使用fetch是需要封装的，组件居然可以那么复杂，makefile、dockerfile又是什么，完全看不懂。如果找一个合适的比喻，看这些代码的我就像第一次进城的老鼠。突然想起来面试的时候部门领导还管我要了一份我的项目代码，我觉得他一定没有看，不然他或许会嫌弃地把我的名字从offer名单上划掉。 ovo

但我觉得更大的挑战是社交。我是一个典型的选择性社恐，单人面对面不社恐，但人一多就要命了。每次开例会，我的脑子都在叫嚣：西巴，毁灭吧。

一直说组件化开发，但我一直没有理解什么才算组件化开发。现在总算明白了。

我觉得我学习新东西会很慢，一个不熟悉的知识点我有时候得看好几遍，这还不够，还得在某一个得天独厚的另一天，突然醒悟，哦这个东西原来是这样。

我从今年开始，每天都会记录下自己做了什么。起初这样做是因为每周一的例会上需要说一下上周的工作/学习内容，轮到我时我总是回忆不起来+紧张导致只能憋出来一两句。但其实这个小习惯的好处比能让我应付过去例会大得多：比如我会随手记下来今天遇到了什么奇怪的bug，最终的解决方法是什么；或者为明天列一个todolist，不至于在没什么活干的时候无所事事。

PART 1 2021-初入职半年的总结
1 pv-web
1.1 完成系统设置模块，包括
1.1.1 网络设置
该模块是在前辈带领下完成的，是我完成的第一个功能模块。该功能耗时比较长，主要在于带有表单的组件的封装。在完成该功能之后做了总结，通过该模块的书写学习到了：
1. git的基本使用
2. react框架的使用以及组件的封装
3. 组件化开发思想
1.1.2 安全设置
该模块界面较简单，主要实现在于redux的使用。从中学习到了：
1. redux的使用
2. redux的作用与原理（发布订阅模式）
1.1.3 内网域名管理
从该模块的开发中学习到了通过简单基本组件组装成稍复杂组件的思想。
1.2 第三方联动模块
1.3 通知模块
学习到了如何配合后端分页。
1.4 申请资质相关功能模块
印象很深的是备份功能，不是因为编码上有难度，而是因为在业务逻辑上理解出现偏差导致最后修改了业务逻辑来适应编码才急急忙忙完成。拿到功能一定要先理清楚业务逻辑再去编码。
1.5 样式优化
学习到媒体查询的应用。
2 anglerfish-honeypot
anglerfish是一个从0开始的项目，从中学到了很多。
2.1 nextjs的使用
nextjs是一个react框架，该项目基于nextjs实现。
2.2 组件库的选择
在组件库的选择上踩了个大坑，一开始选的是字节刚刚开源的arco-design，结果开发过程中发现有很多bug，而且不比antd轻量，因此后面又转成使用antd。还是应该选用稳定的组件库。
2.3 docker的使用
2.4 husky的配置与使用
2.5 api的编写（还不熟练）
2.6 各种插件的应用

PART2 2022 上半年总结
1. 踩了this的坑 & js中的static
2. react context的使用
3. 不能滥用any类型：遇到了一个bug-没有报错，但也没进入任何一个条件，原因是调用正则的match方法的变量存在是undefined的情况，但我把它指为any了
4. ts泛型
5. 学习打包：用create-react-app新建一个项目，然后eject暴露出来配置，更改webpack配置使它能编译less
6. react自定义钩子
7. useState &useRef的使用，是在InitSkeleton组件中弄懂的
8. 在react中适当使用事件去处理：比如，“一个需要控制显示隐藏的组件，本身不会有太大的性能开销，这个时候可以用操作dom的场景。如果这个组件有子组件，就意味着子组件会因为展开而去重新渲染，如果不重新渲染，还得去优化子组件” ---- 改变style时， useState vs dom操作：useState：state发生变化时，其子组件必定也会重新渲染。dom操作：用useRef获取元素，通过绑定事件去处理样式的变化。这样做的好处：1）如果涉及的是只会引发重绘的样式，明显dom操作比useState更合理；2）如果涉及的是会引发回流的样式，比如最常用的display: 'none'，此时，如果是dom操作，display属性为none时，对其子元素进行dom操作不会引起回流和重绘，但useState仍会引起子组件的重新渲染
9. 防抖 & 节流
10. 代码复用
11. 封装echarts & echarts-for-react map：在蜜罐里用echarts-for-react时，不知道map类型怎么用它，所以自己把用到map的地方自己封装了一个组件。研究了一下，知道了map怎么用：echarts和echarts-for-react结合起来，先用echarts注册一下json数据，就可以正常使用了。引入的时候，是import * as echarts from 'echarts'，不是import echarts from 'echarts'
12. husky的使用
13. webpack代码分割（还没有去看）
14. 重构modalForm 
15. authorization的处理 - 在main.ts中
16. 域账号登录的实现
17. 浏览器兼容性测试 顺便学习了hack
18. npx
19. 学了一点点nodejs
20. promise async await - 怎么处理异步返回的值
21. clickhouse中间件（honeypot）
26. pvs和pv的更新流程

一些面试时看过的八股文也出现在了项目中。比如diff，我在了解diff时一直在想，了解这种底层的东西有什么用呢，面试为什么会问这种东西，没想到它无处不在。印象最深的是有一个简单的在table中显示数据的功能，碰巧有两行数据的rowKey相同了，导致这条数据一直出现在表格的第一行。

开始阅读antd的源码。看了antd的源码才感觉到我并没有很好地使用typescript的类型，尤其是我去体验了一下github上一个类型挑战之后，真的觉得我之前都白用类型了！遇事不决就any可太不优雅了，而且可能会带来bug。我印象很深的一个bug是我在if-else语句的条件中写了```(rule as any).match(reg)```没有报错，但也没进入任何一个条件，原因是调用正则的match方法的变量存在是undefined的情况，但我把它指为any了。另外，antd用了好多less的高级用法，比如less函数、mixin等等，这些用法可能不算高级，但我从来没有想到在自己的代码中用过。在后面的开发中，我也用了一把mixin，减少了很多css重复代码，真的爽。还有其他的一些知识，比如cloneElement、useImpression，有很多自己封装组件时的疑问都在源码中找到答案了。

哦对了，还有一个要记录的事情，是我第一次向开源社区提了pr，虽然还没有被合并。

感受到我自己有一个很大的问题：对业务不太理解，接到任务就只想着代码怎么写，但其实有时候甚至都不知道这个功能是干啥的。

特别特别感谢公司的前辈们！

------
写这篇总结之前，我去掘金看了一些别人写的总结，发现大家都看了好多书，业余时间也写了很多有意思的项目。有被刺激到。
说是写小结，但碎碎念太多了，没有了小结的样子。立个flag吧！周末别老打游戏了，抽空去实现我记录下来的想法。
